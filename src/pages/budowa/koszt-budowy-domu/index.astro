---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import Header from '../../../components/Header.astro';
import Footer from '../../../components/Footer.astro';
import ArticleSidebar from '../../../components/ArticleSidebar.astro';
import Breadcrumbs from '../../../components/Breadcrumbs.astro';

const breadcrumbs = [
  { label: 'Strona główna', href: '/' },
  { label: 'Budowa', href: '/budowa' },
  { label: 'Koszt Budowy Domu' }
];
---

<BaseLayout 
  title="Koszt Budowy Domu 2026 - Kompletny Przewodnik Inwestora | domjakosci.pl"
  description="Sprawdź aktualny koszt budowy domu w 2026 roku. Skorzystaj z kalkulatora budowlanego, checklisty i dowiedz się, jak zaplanować budżet."
  type="article"
  author="Dariusz Nowicki"
>
  <Header />
  
  <!-- Added progress bar under header -->
  <div class="sticky top-16 z-40 h-1 bg-stone-200">
    <div id="progressBar" class="h-full bg-orange-500 transition-all duration-300" style="width: 0%"></div>
  </div>

  <!-- Added sticky left sidebar with TOC -->
  <div class="fixed left-0 top-20 hidden lg:block w-48 h-[calc(100vh-80px)] overflow-y-auto border-r border-stone-300 bg-stone-50 p-6">
    <nav id="tocNav" class="space-y-2">
      <p class="text-xs font-bold text-zinc-600 mb-4 uppercase">Spis treści</p>
    </nav>
  </div>
  
  <main class="lg:ml-48 max-w-7xl mx-auto px-4 py-12">
    <Breadcrumbs items={breadcrumbs} />
    
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      <article class="lg:col-span-2">
        <header class="mb-12">
          <span class="inline-block py-1 px-3 rounded-full bg-orange-100 text-orange-600 text-sm font-semibold mb-4">
            Aktualizacja: Styczeń 2026
          </span>
          <h1 class="text-4xl lg:text-5xl font-extrabold tracking-tight text-zinc-700 mb-6">
            Koszt Budowy Domu 2026: Kompletny Przewodnik Inwestora
          </h1>
          <p class="text-xl text-zinc-600 leading-relaxed mb-8">
            Planujesz budowę domu w 2026 roku? Ceny materiałów i robocizny dynamicznie się zmieniają. 
            Nasz przewodnik pomoże Ci precyzyjnie oszacować budżet, uniknąć ukrytych kosztów i przygotować się 
            do procesu inwestycyjnego krok po kroku.
          </p>
        </header>

        <!-- Complete new content from provided HTML -->
        <section id="kalkulator" class="py-12 bg-stone-50 rounded-2xl p-8 mb-12 border border-stone-200">
          <h2 class="text-3xl font-bold text-zinc-700 mb-8 text-center">Szacunkowy Kalkulator Budowy 2026</h2>
          
          <div class="bg-white rounded-2xl shadow-xl border border-stone-100 p-6 md:p-8">
            <div class="grid md:grid-cols-2 gap-8">
              <!-- Input Controls -->
              <div class="space-y-6">
                <div>
                  <label for="calc-area" class="block text-sm font-medium text-zinc-700 mb-2">
                    Powierzchnia użytkowa domu (m²)
                  </label>
                  <input 
                    id="calc-area" 
                    type="number" 
                    min="35" 
                    max="500" 
                    value="120"
                    class="w-full px-4 py-3 rounded-lg border border-stone-300 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all text-lg font-semibold text-zinc-900"
                  />
                  <input 
                    id="calc-area-range" 
                    type="range" 
                    min="35" 
                    max="300" 
                    value="120"
                    class="w-full mt-3 h-2 bg-stone-200 rounded-lg appearance-none cursor-pointer accent-orange-500"
                  />
                </div>

                <div>
                  <span class="block text-sm font-medium text-zinc-700 mb-2">Standard wykończenia</span>
                  <div class="grid grid-cols-3 gap-2">
                    <button type="button" data-standard="economic" class="calc-std-btn py-2 px-3 rounded-lg text-sm font-medium transition-all border bg-white text-zinc-600 border-stone-200 hover:bg-stone-50">
                      Ekonomiczny
                    </button>
                    <button type="button" data-standard="standard" class="calc-std-btn py-2 px-3 rounded-lg text-sm font-medium transition-all border bg-orange-500 text-white border-orange-500 shadow-md">
                      Standard
                    </button>
                    <button type="button" data-standard="premium" class="calc-std-btn py-2 px-3 rounded-lg text-sm font-medium transition-all border bg-white text-zinc-600 border-stone-200 hover:bg-stone-50">
                      Premium
                    </button>
                  </div>
                </div>

                <label class="flex items-center gap-3 cursor-pointer">
                  <input id="calc-garage" type="checkbox" checked class="w-5 h-5 rounded border-stone-300 text-orange-500" />
                  <span class="text-sm font-medium text-zinc-700">Dodaj garaż (+45 000 zł)</span>
                </label>
              </div>

              <!-- Results -->
              <div class="bg-gradient-to-br from-orange-50 to-stone-50 rounded-xl p-6 border border-orange-100">
                <div class="space-y-4">
                  <div>
                    <p class="text-sm text-zinc-600 mb-1">Koszt całkowity</p>
                    <p id="calc-result-total" class="text-3xl font-bold text-orange-600">695 600 zł</p>
                  </div>
                  <div class="border-t border-orange-200 pt-4">
                    <p class="text-sm text-zinc-600 mb-1">Koszt za m²</p>
                    <p id="calc-result-m2" class="text-2xl font-bold text-zinc-700">5 797 zł</p>
                  </div>
                  <div class="border-t border-orange-200 pt-4 space-y-2">
                    <div>
                      <p class="text-xs text-zinc-600">Roboty raw (35%)</p>
                      <p id="calc-result-raw" class="font-semibold text-zinc-700">243 460 zł</p>
                    </div>
                    <div>
                      <p class="text-xs text-zinc-600">Roboty developerskie (45%)</p>
                      <p id="calc-result-dev" class="font-semibold text-zinc-700">313 020 zł</p>
                    </div>
                    <div>
                      <p class="text-xs text-zinc-600">Wykończenie (20%)</p>
                      <p id="calc-result-key" class="font-semibold text-zinc-700">139 120 zł</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Checklist Section -->
        <section id="checklist" class="py-12 mb-12">
          <h2 class="text-3xl font-bold text-zinc-700 mb-8">Budowlana Checklist 2026</h2>
          
          <div class="bg-gradient-to-r from-orange-50 to-stone-50 rounded-xl p-6 mb-6 border border-orange-100">
            <div class="flex items-center gap-4">
              <div class="w-16 h-16 bg-orange-500 rounded-full flex items-center justify-center">
                <span class="text-2xl font-bold text-white" id="checklist-progress-text">0%</span>
              </div>
              <div class="flex-1">
                <p class="font-semibold text-zinc-900 mb-2">Postęp przygotowań</p>
                <div class="w-full bg-stone-300 rounded-full h-2">
                  <div id="checklist-progress-bar" class="bg-orange-500 h-full rounded-full transition-all duration-300" style="width: 0%"></div>
                </div>
              </div>
            </div>
          </div>

          <div id="checklist-instruction-msg" class="bg-blue-50 border border-blue-200 text-blue-700 p-4 rounded-lg mb-6">
            Zaznacz co już masz gotowe w przygotowaniach do budowy
          </div>

          <div id="checklist-success-msg" class="bg-green-50 border border-green-200 text-green-700 p-4 rounded-lg mb-6 hidden">
            Świetnie! Ukończyłeś wszystkie przygotowania. Jesteś gotowy do rozpoczęcia budowy!
          </div>

          <div class="space-y-3">
            <div class="checklist-item-container">
              <label class="flex items-start gap-3 cursor-pointer p-4 rounded-lg border border-stone-200 hover:bg-stone-50 transition-colors">
                <input type="checkbox" class="checklist-checkbox w-5 h-5 rounded border-stone-300 text-orange-500 mt-1" />
                <span class="flex-1">
                  <span class="block font-semibold text-zinc-700 checklist-label">Grunt zakupiony i dokumenty przygotowane</span>
                  <span class="checklist-tip text-xs text-zinc-500 mt-1 block">Upewnij się, że posiadasz aktualne dokumenty własności i pozwolenia</span>
                </span>
              </label>
            </div>

            <div class="checklist-item-container">
              <label class="flex items-start gap-3 cursor-pointer p-4 rounded-lg border border-stone-200 hover:bg-stone-50 transition-colors">
                <input type="checkbox" class="checklist-checkbox w-5 h-5 rounded border-stone-300 text-orange-500 mt-1" />
                <span class="flex-1">
                  <span class="block font-semibold text-zinc-700 checklist-label">Projekt architektoniczno-budowlany zatwierdony</span>
                  <span class="checklist-tip text-xs text-zinc-500 mt-1 block">Projekt musi być wpisany w rejestr projektów</span>
                </span>
              </label>
            </div>

            <div class="checklist-item-container">
              <label class="flex items-start gap-3 cursor-pointer p-4 rounded-lg border border-stone-200 hover:bg-stone-50 transition-colors">
                <input type="checkbox" class="checklist-checkbox w-5 h-5 rounded border-stone-300 text-orange-500 mt-1" />
                <span class="flex-1">
                  <span class="block font-semibold text-zinc-700 checklist-label">Pozwolenie na budowę wydane</span>
                  <span class="checklist-tip text-xs text-zinc-500 mt-1 block">Bez tego dokumentu nie możesz rozpocząć prace</span>
                </span>
              </label>
            </div>

            <div class="checklist-item-container">
              <label class="flex items-start gap-3 cursor-pointer p-4 rounded-lg border border-stone-200 hover:bg-stone-50 transition-colors">
                <input type="checkbox" class="checklist-checkbox w-5 h-5 rounded border-stone-300 text-orange-500 mt-1" />
                <span class="flex-1">
                  <span class="block font-semibold text-zinc-700 checklist-label">Budżet i finansowanie zatwierdzone</span>
                  <span class="checklist-tip text-xs text-zinc-500 mt-1 block">Miej zarezerwowane fundusze na wszystkie etapy</span>
                </span>
              </label>
            </div>

            <div class="checklist-item-container">
              <label class="flex items-start gap-3 cursor-pointer p-4 rounded-lg border border-stone-200 hover:bg-stone-50 transition-colors">
                <input type="checkbox" class="checklist-checkbox w-5 h-5 rounded border-stone-300 text-orange-500 mt-1" />
                <span class="flex-1">
                  <span class="block font-semibold text-zinc-700 checklist-label">Inżynier nadzoru budowy zatrudniony</span>
                  <span class="checklist-tip text-xs text-zinc-500 mt-1 block">Wymagany do nadzoru jakości i bezpieczeństwa</span>
                </span>
              </label>
            </div>

            <div class="checklist-item-container">
              <label class="flex items-start gap-3 cursor-pointer p-4 rounded-lg border border-stone-200 hover:bg-stone-50 transition-colors">
                <input type="checkbox" class="checklist-checkbox w-5 h-5 rounded border-stone-300 text-orange-500 mt-1" />
                <span class="flex-1">
                  <span class="block font-semibold text-zinc-700 checklist-label">Umowy z wykonawcami podpisane</span>
                  <span class="checklist-tip text-xs text-zinc-500 mt-1 block">Jasne warunki i harmonogram prac</span>
                </span>
              </label>
            </div>
          </div>
        </section>

        <!-- FAQ Section -->
        <section id="faq" class="py-12 mb-12">
          <h2 class="text-3xl font-bold text-zinc-700 mb-8">Pytania i Odpowiedzi</h2>
          
          <div class="space-y-4">
            <div class="border border-stone-200 rounded-lg overflow-hidden">
              <button type="button" class="faq-toggle w-full text-left p-6 bg-stone-50 hover:bg-stone-100 transition-colors flex items-center justify-between" aria-expanded="false">
                <span class="font-semibold text-zinc-700">Ile kosztuje budowa domu w 2026 roku?</span>
                <svg class="icon-transform w-5 h-5 text-zinc-600 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
                </svg>
              </button>
              <div class="max-h-0 overflow-hidden opacity-0 transition-all duration-300">
                <div class="p-6 bg-white border-t border-stone-200">
                  <p class="text-zinc-600">Koszt budowy domu w 2026 roku wynosi średnio od 4200 do 8500 zł za m², w zależności od standardu wykończenia. Dom 120 m² w standardzie kosztuje około 696 000 zł bez garaży, lub 741 000 zł z garażem.</p>
                </div>
              </div>
            </div>

            <div class="border border-stone-200 rounded-lg overflow-hidden">
              <button type="button" class="faq-toggle w-full text-left p-6 bg-stone-50 hover:bg-stone-100 transition-colors flex items-center justify-between" aria-expanded="false">
                <span class="font-semibold text-zinc-700">Jakie są główne komponenty kosztu budowy?</span>
                <svg class="icon-transform w-5 h-5 text-zinc-600 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
                </svg>
              </button>
              <div class="max-h-0 overflow-hidden opacity-0 transition-all duration-300">
                <div class="p-6 bg-white border-t border-stone-200">
                  <p class="text-zinc-600 mb-3">Koszt budowy dzieli się na trzy główne części:</p>
                  <ul class="text-zinc-600 space-y-2">
                    <li><strong>Roboty raw (35%)</strong> - wykopy, fundamenty, ściany</li>
                    <li><strong>Roboty developerskie (45%)</strong> - stropy, dach, instalacje</li>
                    <li><strong>Wykończenie (20%)</strong> - malarstwo, podłogi, drzwi</li>
                  </ul>
                </div>
              </div>
            </div>

            <div class="border border-stone-200 rounded-lg overflow-hidden">
              <button type="button" class="faq-toggle w-full text-left p-6 bg-stone-50 hover:bg-stone-100 transition-colors flex items-center justify-between" aria-expanded="false">
                <span class="font-semibold text-zinc-700">Czy może budować bez pozwolenia?</span>
                <svg class="icon-transform w-5 h-5 text-zinc-600 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
                </svg>
              </button>
              <div class="max-h-0 overflow-hidden opacity-0 transition-all duration-300">
                <div class="p-6 bg-white border-t border-stone-200">
                  <p class="text-zinc-600">Prawo budowlane wymaga pozwolenia na budowę dla domów jednorodzinnych. Budowa bez pozwolenia grozi karami finansowymi i nakazem rozbiórki. Istnieją wyjątki dla małych garaży i obiektów gospodarczych - sprawdź przepisy dla Twojej gminy.</p>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Related Articles -->
        <section class="mt-16 pt-12 border-t border-stone-300">
          <h2 class="text-2xl font-bold text-zinc-700 mb-6">Poznaj więcej na temat budowy domu</h2>
          <div class="grid md:grid-cols-2 gap-4">
            <a href="/budowa/bledy-przy-budowie" class="p-4 border border-stone-300 rounded-lg hover:border-orange-500 hover:shadow-md transition-all">
              <h3 class="font-semibold text-zinc-700 mb-2">10 Najczęstszych Błędów przy Budowie</h3>
              <p class="text-sm text-zinc-600">Poznaj najczęstsze błędy i jak ich uniknąć</p>
            </a>
            <a href="/budowa/system-gospodarczy" class="p-4 border border-stone-300 rounded-lg hover:border-orange-500 hover:shadow-md transition-all">
              <h3 class="font-semibold text-zinc-700 mb-2">Budowa Systemem Gospodarczym</h3>
              <p class="text-sm text-zinc-600">Oszczędzaj na kosztach - buduj systemem gospodarczym</p>
            </a>
            <a href="/budowa/koszt-120m2" class="p-4 border border-stone-300 rounded-lg hover:border-orange-500 hover:shadow-md transition-all">
              <h3 class="font-semibold text-zinc-700 mb-2">Koszt Budowy Domu 120 m²</h3>
              <p class="text-sm text-zinc-600">Szczegółowy przydział kosztów dla domu 120 m²</p>
            </a>
            <a href="/budowa/koszt-140m2-piwnica" class="p-4 border border-stone-300 rounded-lg hover:border-orange-500 hover:shadow-md transition-all">
              <h3 class="font-semibold text-zinc-700 mb-2">Koszt Budowy z Piwnicą - 140 m²</h3>
              <p class="text-sm text-zinc-600">Wycena dla większego domu z piwnicą</p>
            </a>
          </div>
        </section>
      </article>

      <!-- Sidebar now shows minimal and at bottom -->
      <aside class="lg:col-span-1">
        <ArticleSidebar />
      </aside>
    </div>
  </main>

  <Footer />

  <script>
    // TOC generation and scroll tracking
    document.addEventListener('DOMContentLoaded', () => {
      const headings = document.querySelectorAll('article h2, article h3');
      const tocNav = document.getElementById('tocNav');
      
      headings.forEach((heading, index) => {
        if (!heading.id) heading.id = `heading-${index}`;
        const link = document.createElement('a');
        link.href = `#${heading.id}`;
        link.className = `text-sm block py-1 px-2 rounded transition-colors ${
          heading.tagName === 'H3' ? 'ml-3 text-zinc-600 hover:text-orange-500' : 'font-medium text-zinc-700 hover:text-orange-500'
        }`;
        link.textContent = heading.textContent;
        tocNav?.appendChild(link);
      });

      // Progress bar on scroll
      window.addEventListener('scroll', () => {
        const docHeight = document.documentElement.scrollHeight - window.innerHeight;
        const scrollPercent = (window.scrollY / docHeight) * 100;
        const progressBar = document.getElementById('progressBar');
        if (progressBar) progressBar.style.width = scrollPercent + '%';
      });

      const calcArea = document.getElementById('calc-area');
      const calcRange = document.getElementById('calc-area-range');
      const calcGarage = document.getElementById('calc-garage');
      const calcBtns = document.querySelectorAll('.calc-std-btn');
      
      const elTotal = document.getElementById('calc-result-total');
      const elM2 = document.getElementById('calc-result-m2');
      const elRaw = document.getElementById('calc-result-raw');
      const elDev = document.getElementById('calc-result-dev');
      const elKey = document.getElementById('calc-result-key');

      let state = {
        area: 120,
        standard: 'standard',
        garage: true
      };

      const RATES = {
        'economic': 4200,
        'standard': 5800,
        'premium': 8500
      };
      const GARAGE_COST = 45000;

      function formatCurrency(val) {
        return new Intl.NumberFormat('pl-PL', {
          style: 'currency', currency: 'PLN', maximumFractionDigits: 0
        }).format(val);
      }

      function updateCalc() {
        let base = state.area * RATES[state.standard];
        if (state.garage) base += GARAGE_COST;
        
        if(elTotal) elTotal.innerText = formatCurrency(base);
        if(elM2) elM2.innerText = formatCurrency(Math.round(base / state.area));
        
        if(elRaw) elRaw.innerText = formatCurrency(base * 0.35);
        if(elDev) elDev.innerText = formatCurrency(base * 0.45);
        if(elKey) elKey.innerText = formatCurrency(base * 0.20);
      }

      if(calcArea) {
        calcArea.addEventListener('input', (e) => {
          state.area = Number(e.target.value);
          if(calcRange) calcRange.value = state.area;
          updateCalc();
        });
      }
      if(calcRange) {
        calcRange.addEventListener('input', (e) => {
          state.area = Number(e.target.value);
          if(calcArea) calcArea.value = state.area;
          updateCalc();
        });
      }
      if(calcGarage) {
        calcGarage.addEventListener('change', (e) => {
          state.garage = e.target.checked;
          updateCalc();
        });
      }
      
      calcBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          state.standard = btn.getAttribute('data-standard');
          
          calcBtns.forEach(b => {
            b.classList.remove('bg-orange-500', 'text-white', 'border-orange-500', 'shadow-md');
            b.classList.add('bg-white', 'text-zinc-600', 'border-stone-200');
          });
          btn.classList.remove('bg-white', 'text-zinc-600', 'border-stone-200');
          btn.classList.add('bg-orange-500', 'text-white', 'border-orange-500', 'shadow-md');
          
          updateCalc();
        });
      });

      const checkboxes = document.querySelectorAll('.checklist-checkbox');
      const progressText = document.getElementById('checklist-progress-text');
      const progressBar = document.getElementById('checklist-progress-bar');
      const successMsg = document.getElementById('checklist-success-msg');
      const instructMsg = document.getElementById('checklist-instruction-msg');

      function updateChecklist() {
        const total = checkboxes.length;
        let checked = 0;
        
        checkboxes.forEach(cb => {
          const label = cb.closest('.checklist-item-container').querySelector('.checklist-label');
          const tip = cb.closest('.checklist-item-container').querySelector('.checklist-tip');
          
          if(cb.checked) {
            checked++;
            label.classList.add('text-stone-400', 'line-through');
            label.classList.remove('text-zinc-700');
            if(tip) tip.style.display = 'none';
          } else {
            label.classList.remove('text-stone-400', 'line-through');
            label.classList.add('text-zinc-700');
            if(tip) tip.style.display = 'block';
          }
        });

        const percent = Math.round((checked / total) * 100);
        if(progressText) progressText.innerText = percent + '%';
        if(progressBar) progressBar.style.width = percent + '%';

        if(checked === total) {
          if(successMsg) successMsg.classList.remove('hidden');
          if(successMsg) successMsg.classList.add('block');
          if(instructMsg) instructMsg.classList.add('hidden');
        } else {
          if(successMsg) successMsg.classList.add('hidden');
          if(successMsg) successMsg.classList.remove('block');
          if(instructMsg) instructMsg.classList.remove('hidden');
        }
      }

      checkboxes.forEach(cb => {
        cb.addEventListener('change', updateChecklist);
      });

      const faqToggles = document.querySelectorAll('.faq-toggle');
      
      faqToggles.forEach(toggle => {
        toggle.addEventListener('click', function() {
          const expanded = this.getAttribute('aria-expanded') === 'true';
          const content = this.nextElementSibling;
          const icon = this.querySelector('.icon-transform');

          this.setAttribute('aria-expanded', !expanded);
          if(!expanded) {
             content.classList.remove('max-h-0', 'opacity-0');
             content.classList.add('max-h-48', 'opacity-100');
             icon.classList.add('rotate-180');
          } else {
             content.classList.add('max-h-0', 'opacity-0');
             content.classList.remove('max-h-48', 'opacity-100');
             icon.classList.remove('rotate-180');
          }
        });
      });

      updateCalc();
      updateChecklist();
    });
  </script>
</BaseLayout>


