---
import MainNav from './MainNav.astro';
---

<header id="site-header" class="w-full bg-white border-b border-stone-300 fixed top-0 z-50 shadow-sm">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
      <a href="/" class="flex items-center gap-3">
        <img src="/favicon.svg" alt="Portal Budowlany" class="w-9 h-9 flex-shrink-0" />
        <span id="site-logo-text" class="text-2xl font-bold text-zinc-700 leading-none">Portal<span class="text-orange-500">Budowlany</span></span>
      </a>
      <MainNav />
    </div>
  </div>
  <!-- Global reading progress (minimal, full-width under topbar) -->
  <div class="w-full bg-stone-200">
    <div id="globalProgressBar" class="h-[0.18rem] bg-orange-500 transition-all duration-150" style="width:0%"></div>
  </div>

  <script>
    // Global reading progress bar update (header is fixed/non-collapsing)
    (function(){
      const bar = document.getElementById('globalProgressBar');
      if (!bar) return;
      function update() {
        const docHeight = document.documentElement.scrollHeight - window.innerHeight;
        const percent = docHeight > 0 ? Math.round((window.scrollY / docHeight) * 100) : 0;
        bar.style.width = percent + '%';
      }
      window.addEventListener('scroll', update, { passive: true });
      window.addEventListener('resize', update);
      update();
    })();
  </script>
</header>
